<!DOCTYPE html>
<html>
<head>
    
     <link  href='/src/app/profile/profile.component.css'>
     <link href=' https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css'>
     <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Profil</title>
</head>
   <body>
    <!--div id="sidebarStatus"  class="container_profile">
   
    </div>
    <div class="container">
        <div class="content">
         
            <div class="profile-pic">
                <label class="-label" for="file" accept="image/*">
                  <span class="icon-camera"><i class='bx bx-camera'></i></span>
                  <span class="profilepic__text">Change Image</span>
                </label>
                <input  id="file" type="file" (change)="selectFile($event)"/>
                <img  [src]="preview"   width="200"  />
              </div>
            <h2 class="name" >{{currentUser.username}}</h2>
            <h2 class="email">{{user.email}}</h2>
           
        </div>
       
        <div   class="formulaire">
            <div class="nav-menu">
                <ul>
                    <li><a class="generalLink">Générale</a></li>
                    <li><a   class="passwordLink">Changer le mot de passe</a></li>
                    <li><a  class="socialLink">Liens sociaux</a></li>
                    <li><a  class="link">Notifications</a></li>
                </ul>
            </div>
            <div class="form-box general">
                <form action="#" [formGroup]="profileForm" class="account_general" id="account-general" >
                    
                        <div class="input-box">
                        <input type="text" required class="input-field" id="nom"  placeholder="Nom" formControlName="nom" [ngModel]="user.nom">
                       
                        <i class="bx bx-user"></i>
                    
                
                        <input type="text" required class="input-field" placeholder="Prénom" formControlName="prenom"  [ngModel]="user.prenom">
                        <i class="bx bx-user"></i>
                    
                    
                        <input type="tel" required class="input-field" placeholder="Numéro de portable" formControlName="tel" [ngModel]="user.tel">
                       <i class='bx bx-mobile' ></i>
                    
                  
                        <input type="email"required  class="input-field" placeholder="E-mail"  formControlName="email" [ngModel]="user.email">
                        <i class="bx bx-envelope"></i>
                    
                    
                        <input type="text" required class="input-field" placeholder="Pays" formControlName="pays" [ngModel]="user.pays">
                        <i class='bx bx-flag'></i>
                    </div>
                   
                    <div class="input-box">
                        <input type="submit" class="submit" value="Changer profil"  (click)="updateProfile()">
                    </div>
                    
                 </form>
            </div>
            <div class="form-box changePassword">
                <form action="#"  class="account_change_password" id="account-change-password" >
                    
                        <div class="input-box">
                            <input type="password" class="input-field" placeholder="Mot de passe actuel">
                            <i class='bx bx-lock-alt'></i>
                            <input type="password" class="input-field" placeholder="Nouveau mot de passe">
                            <i class='bx bx-lock-alt'></i>
                            <input type="password" class="input-field" placeholder="Confirmer nouveau mot de passe">
                            <i class='bx bx-lock-alt'></i>
                        </div>
                    <div class="input-box">
                        <input type="submit" class="submit" value="Changer profil" >
                    </div>
                    
                 </form>
            </div>
            <div class="form-box social">
             <form action="#"  calss="acount_account_social_links " id="account-social-links">
                        <div class="input-box"  >
                                                               
                            <input type="text" class="input-field" placeholder="Twitter">
                            <i class='bx bxl-twitter' ></i>
                            <input type="text" class="input-field" placeholder="Facebook">
                            <i class='bx bxl-facebook' ></i>
                            <input type="text" class="input-field" placeholder="Google+">
                            <i class='bx bxl-google-plus' ></i>
                            <input type="text" class="input-field" placeholder="LinkedIn">
                            <i class='bx bxl-linkedin'></i>
                            <input type="text" class="input-field" placeholder="Instagram">
                            <i class='bx bxl-instagram' ></i>
                        
                        </div>

                         <div class="input-box">
                        <input type="submit" class="submit" value="Changer profil" >
                    </div>
                    </form>
                
                </div>
        </div>
    </div>

   </body-->

  <!------------------------------------------------------------profile------------------------------>
  <!--div id="sidebarStatus"  class="container_profile">
    </div>
    <div class="container">
    <div class="wrapper">
      <div class="img-area">
        <div class="inner-area">
          <label class="-label" for="file" accept="image/*">
            <span class="icon-camera"><i class='bx bx-camera'></i></span>
            <span class="profilepic__text">Change Image</span>
          </label>
          <input  id="file" type="file" (change)="selectFile($event)"/>
          <img [src]="preview" *ngIf="preview" >
         
          <img src="/assets/image/user.png" *ngIf="!preview"  >
         
        </div>
      </div>
      <div class="icon arrow"><i class="fas fa-arrow-left"></i></div>
      <div class="icon dots"><i class="fas fa-ellipsis-v"></i></div>
      <div class="name">{{user.nom}} {{user.prenom}}</div>
      <div class="about">{{user.email}}</div>
      <div class="social-icons">
        <a href="#" class="fb"><i class='bx bxl-facebook'></i></a>
        <a href="#" class="twitter"><i class='bx bxl-twitter' ></i></a>
        <a href="#" class="insta"><i class='bx bxl-instagram' ></i></a>
       
      </div>
      <div *ngIf="user.username !== currentUser.username" class="buttons">
        <button (click)="openChat()"><i class='bx bxl-messenger' > Message </i></button>
        
      </div>
    
     
    </div>
   
    <div class="nav-menu">
      <ul>
         
          <li><a (click)=" clickLinkPoste()" class="posteLink">Postes</a></li>
          <li *ngIf="user.username === currentUser.username"><a (click)="clickLinkGenerale()" class="generalLink">Générale</a></li>
          <li *ngIf="user.username === currentUser.username"><a (click)="clickLinkPassword()"  class="passwordLink">Changer le mot de passe</a></li>
          <li *ngIf="user.username === currentUser.username"><a (click)="clickLinkSocial()" class="socialLink">Liens sociaux</a></li>
          <li *ngIf="user.username === currentUser.username"><a  class="link">Notifications</a></li>
      </ul>
      </div>
          
      <div  class="listeMenu">
  <div   class="formulaire general">
   
    <form action="#" [formGroup]="profileForm" class="account_general" id="account-general" >
        
            <div class="input-box">
            
            
              
              <span>Nom:</span>
              <i class="bx bx-user"></i>
            <input type="text" required class="input-field" id="nom"  placeholder="Nom" formControlName="nom" [ngModel]="user.nom">
           
                     
            <span>Prénom:</span>
            <i class="bx bx-user"></i>
            <input type="text" required class="input-field" placeholder="Prénom" formControlName="prenom"  [ngModel]="user.prenom">
            
           
           
             
              <span>Username:</span>
              <i class="bx bx-user"></i>
            <input type="text" required class="input-field" id="username"  placeholder="Username" formControlName="username" [ngModel]="user.username">
            
            <span>Numéro de portable:</span>
            <i class='bx bx-mobile' ></i>
            <input type="tel" required class="input-field" placeholder="Numéro de portable" formControlName="tel" [ngModel]="user.tel">
          
        
          <span>E-mail:</span>
          <i class="bx bx-envelope"></i>
            <input type="email"required  class="input-field" placeholder="E-mail"  formControlName="email" [ngModel]="user.email">
          
        
          <span>Pays:</span>
          <i class='bx bx-flag'></i>
            <input type="text" required class="input-field" placeholder="Pays" formControlName="pays" [ngModel]="user.pays">
          
        </div>
       
        <div class="input">
           
            <button id="btnAdd" type="submit" (click)="updateProfile()">
              <div class="svg-wrapper-1">
                <div class="svg-wrapper">
    
                  <i class='bx bx-check'></i>
                </div>
              </div>
              <span>Changer Profil</span>
            </button>
        </div>
        
     </form>
     
     </div>
    
     <div   class="formulaire changePassword">
   
      <form action="#"  class="account_change_password" id="account-change-password" >
          
              <div class="input-box">
                <i class='bx bx-lock-alt'></i>
               <input type="password" class="input-field" placeholder="Mot de passe actuel">
                  <i class='bx bx-lock-alt'></i>
                  <input type="password" class="input-field" placeholder="Nouveau mot de passe">
                  <i class='bx bx-lock-alt'></i>
                  <input type="password" class="input-field" placeholder="Confirmer nouveau mot de passe">
                
              </div>
              <div class="input">
             
                <button id="btnAdd" type="submit" (click)="updateProfile()">
                  <div class="svg-wrapper-1">
                    <div class="svg-wrapper">
        
                      <i class='bx bx-check'></i>
                    </div>
                  </div>
                  <span>Changer Profil</span>
                </button>
            </div>
          
       </form>
  </div>
  <div class="formulaire social">
    <form action="#"  calss="acount_account_social_links " id="account-social-links">
               <div class="input-box"  >
                <i class='bx bxl-twitter' ></i>                               
                   <input type="text" class="input-field" placeholder="Twitter">
                   <i class='bx bxl-facebook' ></i>
                   <input type="text" class="input-field" placeholder="Facebook">
                  
                   <i class='bx bxl-linkedin'></i>
                   <input type="text" class="input-field" placeholder="LinkedIn">
                   <i class='bx bxl-instagram' ></i>
                   <input type="text" class="input-field" placeholder="Instagram">
                  
               
               </div>

               <div class="input">
              
                <button id="btnAdd" type="submit" (click)="updateProfile()">
                  <div class="svg-wrapper-1">
                    <div class="svg-wrapper">
        
                      <i class='bx bx-check'></i>
                    </div>
                  </div>
                  <span>Changer Profil</span>
                </button>
            </div>
           </form>
       
       </div>
       
</div>
<div class="poste">
  <app-poste  [category]="'Catégorie'" [profile]="user.id"></app-poste>
</div>
</div!-->




<div class="profile-container">
  <div class="sidebar">
    
      <div class="img-area">
        <div class="inner-area">
          <label   *ngIf="user.username === currentUser.username" class="-label" for="file" accept="image/*">
            <span class="icon-camera"><i class='bx bx-camera'></i></span>
            <span class="profilepic__text">Change Image</span>
          </label>
          <input  *ngIf="user.username === currentUser.username" id="file" type="file" (change)="selectFile($event)"/>
          <img [src]="preview" *ngIf="preview" >
         
          <img src="/assets/image/user.png" *ngIf="!preview"  >
         
        </div>
      </div>
    
      
      <!--div class="icon arrow"><i class="fas fa-arrow-left"></i></div>
      <div class="icon dots"><i class="fas fa-ellipsis-v"></i></div-->
      <div class="name">{{user.nom}} {{user.prenom}}</div>
    
      <div class="social-icons">
        <a [href]="user.compteFacebook" class="fb" *ngIf="user.compteFacebook"><i class='bx bxl-facebook'></i></a>
        <a  class="fb" *ngIf="!user.compteFacebook"><i class='bx bxl-facebook'></i></a>
        <a [href]="user.compteTwitter" class="twitter" *ngIf="user.compteTwitter"><i class='bx bxl-twitter'  ></i></a>
        <a  class="twitter" *ngIf="!user.compteTwitter"><i class='bx bxl-twitter'  ></i></a>
        <a [href]="user.compteInstagram" class="insta" *ngIf="user.compteInstagram" ><i class='bx bxl-instagram' ></i></a>
        <a  class="insta" *ngIf="!user.compteInstagram" ><i class='bx bxl-instagram' ></i></a>
        <a [href]="user.compteLinked" class="linked" *ngIf="user.compteLinked" ><i class='bx bxl-linkedin-square'></i></a>
        <a class="linked"  *ngIf="!user.compteLinked" ><i class='bx bxl-linkedin-square'></i></a>
      </div>
      <div class="profile-card-inf" >
        <div class="profile-card-inf__item" (click)="showSection('followers')">
          <div class="profile-card-inf__title">{{followers.length}}</div>
          <div class="profile-card-inf__txt">Abonné(e)s</div>
        </div>

           <div class="profile-card-inf__item" (click)="showSection('followeds')">
          <div class="profile-card-inf__title">{{followedUsers.length}}</div>
          <div class="profile-card-inf__txt">Suivi(e)s</div>
            </div>
           
              <div class="profile-card-inf__item" (click)="showSection('posts')">
                <div class="profile-card-inf__title">{{postCount}}</div>
                <div class="profile-card-inf__txt">Posts</div>
              </div>
              <div class="profile-card-inf__item" >
                <i class='bx bx-dots-horizontal-rounded'(click)="togglePopup($event)" ></i>
             
                <div class="popup-content" >
        
                  <ul >
                    <li >
                      <i class='bx bxs-info-circle'></i>
                      <span class="propos" (click)="showSection('info')">À propos</span>
                    </li>
          
                    
                    <li  *ngIf="user.username !== currentUser.username" >
                      <i class='bx bx-block'></i>
                    <span class="bloquer" (click)="popupBlock(user)">Bloquer</span></li>
                    <li (click)=" copyProfileLink()">
                      <i class='bx bx-link'></i>
                      <span class="copier">Copier</span>
                    </li>
                  </ul>
          
                </div>
              
            </div>        
     </div>
    
      <div class="profile-card-ctr" *ngIf="user.username !== currentUser.username">
        <i  class='bx bxl-messenger' (click)="openChat()"></i>
        <button  class="profile-card__button button--blue js-message-btn" (click)="openChat()">Message</button>
        
        <i class='bx bxs-plus-circle' ></i>

        <button class="profile-card__button  button--blue
          "  *ngIf="isFollowingStatus === false"  (click)="followUser()">Suivre</button>
       
     
      <button class="profile-card__button    button--gray  
      " *ngIf="isFollowingStatus === true"  (click)="unfollowUser()">Suivi(e)</button>
   
  </div>
    
    
      <!--div *ngIf="user.username !== currentUser.username" class="buttons">
        <button (click)="openChat()"><i class='bx bxl-messenger' > Message </i></button>
        
      </div-->
    
     
   
      
  </div>

   
     
       
  <app-poste id="posts"  #posteComponent class="section poste" [category]="'Catégorie'"  [profile]="user.id"   ></app-poste>
          
     
      <div class="section followers-list"  id="followers">
         <div class="header-friend">
             <div class="search">
             <input type="text" placeholder="Chercher Amis">
              </div>
             </div>
             
             <div class="body-friend"  *ngFor="let follower of followers">

                <div class="user-row">
                <div class="user-info" (click)="navProfile(follower)">
                  <img [src]= "follower.image ?   follower.image : '/assets/image/user.png'"  alt="user"/>
                  <span classe="name">{{follower.nom}} {{follower.prenom}}</span>
                   <!--span class="email">{{follower.email}}</span-->
                </div>
                <i class='bx bxl-messenger'></i>
                <button (click)="openChatFriend(follower.id)" class="action-follow">Message</button>
                 </div>
                </div>
         </div>
         <div class="section followeds-list"  id="followeds"   >
          <div class="header-friend">
              <div class="search">
              <input type="text" placeholder="Chercher Amis">
               </div>
              </div>
          
 
            
             <div class="body-friend" *ngFor="let followedUser of followedUsers">
 
               <div class="user-row">
               <div class="user-info" (click)="navProfile(followedUser)">
                 <img [src]= "followedUser.image ?   followedUser.image : '/assets/image/user.png'" alt="user"/>
                 <span class="name">{{followedUser.nom}} {{followedUser.prenom}}</span>
                 <!--span class="email">{{followedUser.email}}</span-->
               </div>
               <i class='bx bxl-messenger'></i>
               <button (click)="openChatFriend(followedUser.id)" class="action-follow">Message</button>
                </div>
               </div>
              
          </div>
     
      <div id="info" class="info section">
       
          <div class="card widget-card border-light shadow-sm">
            <div class="card-body p-4">
              <ul class="nav nav-tabs" id="profileTab" >
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="overview-tab" (click)="ShowMenu('overview')">Aperçu</button>
                </li>
                <li class="nav-item" >
                  <button class="nav-link" id="profile-tab"   *ngIf="user.username === currentUser.username"(click)="ShowMenu('profile')" >Profile</button>
                </li>
               
                <li class="nav-item" >
                  <button class="nav-link" id="password-tab"   *ngIf="user.username === currentUser.username"(click)="ShowMenu('password')">Password</button>
                </li>
                <li class="nav-item" >
                  <button class="nav-link" id="block-tab"  *ngIf="user.username === currentUser.username" (click)="ShowMenu('block')" >Bloque</button>
                </li>
              </ul>
              
                <div class="tab-pane mennu" id="overview-tab-pane" >
                  
                  <label>Bio</label>
                  <p class="bio-text">{{user.bio}}</p>
                 
                  <div class="row-content">
                    <div *ngIf="user.username === currentUser.username" class="title">
                      <i class="bx bx-user"></i>
                      <div class="p-2">Nom d'utilisateur</div>
                    </div>
                    <div *ngIf="user.username === currentUser.username" class="info_title">
                      <div class="p-2">{{user.username}}</div>
                    </div>
                    <div class="title">
                      <i class="bx bx-user"></i>
                      <div class="p-2">Prénom</div>
                    </div>
                    <div class="info_title">
                     
                      <div class="p-2">{{user.prenom}}</div>
                    </div>
                    <div class="title">
                      <i class="bx bx-user"></i>
                      <div class="p-2">Nom de famille</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.nom}}</div>
                    </div>
                    <div class="title">
                      <i class='bx bxs-graduation'></i>
                      <div class="p-2">Éducation</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.education}}</div>
                    </div>
                    <div class="title">
                      <i class='bx bx-map'></i>
                      <div class="p-2">Addresse</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.adresse}}</div>
                    </div>
                    <div class="title">
                      <i class='bx bxs-flag-alt'></i>
                      <div class="p-2">Pays</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.pays}}</div>
                    </div>
                    <div class="title">
                      <i class='bx bx-building'></i>
                      <div class="p-2">Emploi</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.emploi}}</div>
                    </div>
                   
                    <div class="title">
                      <i class='bx bx-mobile'></i>
                      <div class="p-2">Téléphone</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.tel}}</div>
                    </div>
                    <div class="title">
                      <i class='bx bxs-envelope' ></i>
                      <div class="p-2">E-mail</div>
                    </div>
                    <div class="info_title">
                      <div class="p-2">{{user.email}}</div>
                    </div>
                  </div>
                </div>
                <div class="form-box mennu" id="profile-tab-pane"  [formGroup]="profileForm">
                  <div class="form-profile">
                    <div class="input-box" >
                     
                    <label class="about">Bio</label>
                  </div>
                    <div class="input-box">
                      
                    <textarea class="textarea-field" formControlName="bio" [ngModel]="user.bio"></textarea>
                    </div>
                    <div class="input-box">
                      <i class="bx bx-user"></i>
                    <input type="text" class="input-field" id="username"  placeholder="Nom d'Utlisateur"   
                    formControlName="username"  
                   [ngModel]="user.username">
                   
                    </div>
                    <mat-error *ngIf="(profileForm.controls.username.touched || profileForm.controls.username.dirty ) && profileForm.controls.username.invalid">
                      <span *ngIf="profileForm.controls.username.errors.required">Remplir Username!</span>
                      <span *ngIf="profileForm.controls.username.errors.pattern">Commencer Par Une Lettre!</span>
                      
                  </mat-error>
                  <span *ngIf="usernameExists">Nom d'utilisateur existe !</span>
                      <div class="input-box">
                        <i class="bx bx-user"></i>
                         <input type="text" class="input-field" placeholder="Prénom" formControlName="prenom"  [ngModel]="user.prenom">
                      </div>
                      <mat-error *ngIf="(profileForm.controls.prenom.touched || profileForm.controls.prenom.dirty ) && profileForm.controls.prenom.invalid">
                        <span *ngIf="profileForm.controls.prenom.errors.required">Remplir Prénom!</span>
                        <span *ngIf="profileForm.controls.prenom.errors.pattern">Saisir Seulement Lettre!</span>
                    </mat-error>
                     
                      <div class="input-box">
                        <i class="bx bx-user"></i>
                          <input type="text" class="input-field" placeholder="Nom de la famille" formControlName="nom"  [ngModel]="user.nom">
                         </div>
                    
                         <mat-error *ngIf="(profileForm.controls.nom.touched || profileForm.controls.nom.dirty ) && profileForm.controls.nom.invalid">
                          <span *ngIf="profileForm.controls.nom.errors.required">Remplir Nom!</span>
                          <span *ngIf="profileForm.controls.nom.errors.pattern">Saisir Seulement Lettre!</span>
                      </mat-error>
                  
                
                       <div class="input-box">
                        <i class='bx bxs-graduation'></i>
                      <input type="text" class="input-field" placeholder="Education" formControlName="education" [ngModel]="user.education">
                      
                      </div>
                      <div class="input-box">
                        <i class='bx bx-building'></i>
                        <input type="text" class="input-field" placeholder="Emploi" formControlName="emploi"[ngModel]="user.emploi">
                        
                        </div>  
                      
                        
                          <div class="input-box">
                            <i class='bx bx-mobile'></i>
                         <input type="tel" class="input-field" placeholder="Téléphone"  formControlName="tel" [ngModel]="user.tel">
                         
                         </div>
                         <mat-error *ngIf="(profileForm.controls.tel.touched || profileForm.controls.tel.dirty) && profileForm.controls.tel.invalid">
                          <span *ngIf="profileForm.controls.tel.errors.pattern">  Le numéro doit commencer par "+" ou "00" et être suivi de 8 à 15 chiffres (espaces autorisés) !</span>   

                         </mat-error>
                         <div class="input-box">
                          <i class='bx bxs-envelope' ></i>
                           <input type="Email" class="input-field" placeholder="E-mail"  formControlName="email"[ngModel]="user.email">
                         
                           </div> 
                           <mat-error *ngIf="(profileForm.controls.email.touched || profileForm.controls.email.dirty ) && profileForm.controls.email.invalid">
                            <span *ngIf="profileForm.controls.email.errors.required">Remplir E-mail!</span>
                            <span *ngIf="profileForm.controls.email.errors.pattern">Saisir E-mail Non Valide!</span>
                          
                          </mat-error> 
                          <span *ngIf="emailExists">E-mail existe !</span>
                        <div class="input-box">
                          <i class='bx bx-map'></i>
                          <input type="text" class="input-field" placeholder="Adresse" formControlName="adresse"[ngModel]="user.adresse">
                          
                          </div>
                            
                            
                          <div class="custom-select-wrapper" >
                            <div class="custom-select"  (click)="toggleDropdown()">
                              
                              <div class="select-trigger" >
                                
                                <i class='bx bxs-flag-alt'></i>
                             
                                <label *ngIf="!user.pays">Pays</label>
                                <label *ngIf="user.pays">{{ user.pays }}</label>
                                <div class="arrow"></div>
                              </div>
                            
                              <div class="custom-options" *ngIf="dropdownOpen">
                              <label  class="custom-option" 
                                *ngFor="let country of countries"   (click)="onSelectCountry(country)"> {{ country }}</label>
                           </div>
                            </div>
                          </div>
                          
                         
                            
                              <div class="input-box">
                                <i class='bx bxl-twitter' ></i> 
                                 <input type="text" class="input-field" placeholder="Twitter" formControlName="twitter" [ngModel]="user.compteTwitter">
                                 
                              </div>
                              <div class="input-box">
                                <i class='bx bxl-facebook' ></i>
                                 <input type="text" class="input-field" placeholder="Facebook" formControlName="facebook" [ngModel]="user.compteFacebook">
                               
                              </div>
                           
                           
                              <div class="input-box">
                                <i class='bx bxl-linkedin'></i>
                                 <input type="text" class="input-field" placeholder="LinkedIn" formControlName="linked" [ngModel]="user.compteLinked">
                                 
                              </div>
                              <div class="input-box">
                                <i class='bx bxl-instagram' ></i>
                                 <input type="text" class="input-field" placeholder="Instagram" formControlName="instagram" [ngModel]="user.compteInstagram">
                                 
                              </div>
                            
                         
                              <div class="update" (click)="updateProfile()">
              
                                <button id="btnAdd" type="submit" >
                                  <div class="svg-wrapper-1">
                                    <div class="svg-wrapper">
                        
                                      <i class='bx bx-check'></i>
                                    </div>
                                  </div>
                                  <label>Changer Profil</label>
                                </button>
                                <span >{{this.errorUpdate}}</span>
                            </div>
                       
                    </div>
                   
                </div>
                
                <div class="form-box-password mennu" id="password-tab-pane"  [formGroup]="passForm">
                  
                  <div class="form-profile">
                    <div class="input-box">
                      <i class="bx bx-lock-alt"></i>
                    <input type="password" class="input-password" placeholder="Mot de Passe Actuel" formControlName="currentPassword">
                    
                    </div>
                    <mat-error *ngIf="passForm.controls.currentPassword.touched && passForm.controls.currentPassword.invalid">
                      <span *ngIf="passForm.controls.currentPassword.errors.required">Remplir Passsword!</span>
                    
                  </mat-error>
                    <div class="input-box">
                      <i class="bx bx-lock-alt"></i>
                    <input type="password" class="input-password" placeholder="Nouveau Mot de Passe" formControlName="newPassword">
                   
                    </div>
                    <mat-error *ngIf="(passForm.controls.newPassword.touched || passForm.controls.newPassword.dirty) && passForm.controls.newPassword.invalid">
                      <!-- Affichez uniquement l'erreur 'required' si elle existe -->
                      <span *ngIf="passForm.controls.newPassword.errors?.required; else otherErrors">
                          Remplir Mot de Passe!
                      </span>
                  
                      <!-- Autres erreurs ne s'afficheront que si l'erreur 'required' n'est pas présente -->
                      <ng-template #otherErrors>
                          <!-- Erreur de longueur minimale -->
                          <span *ngIf="passForm.controls.newPassword.errors?.minlength; else customError">
                              Saisir Au Minimum 8 Caractères!
                          </span>
                  
                          <!-- Erreur de validation personnalisée (affichée seulement si aucune autre erreur n'est présente) -->
                          <ng-template #customError>
                              <span *ngIf="passForm.controls.newPassword.errors?.passwordInvalid">
                                  Le mot de passe doit contenir au moins une lettre majuscule, une lettre minuscule, un chiffre et un caractère spécial!
                              </span>
                          </ng-template>
                      </ng-template>
                  </mat-error>
                    <div class="input-box">
                      <i class="bx bx-lock-alt"></i>
                    <input type="password"class="input-password" placeholder="Confirmez le Mot de Passe" formControlName="confirmationPassword">
                    </div>
                   
                    <mat-error *ngIf="passForm.controls.confirmationPassword.touched && passForm.controls.confirmationPassword.errors?.required">
                      <span>Remplir Confirmation Mot de Passe!</span>
                    </mat-error>
                    <mat-error *ngIf="passForm.controls.confirmationPassword.touched && !passForm.controls.confirmationPassword.errors?.required && passForm.hasError('passwordMismatch')">
                      <span>Les mots de passe ne correspondent pas!</span>
                  </mat-error>
                   
                
                    <div class="update">
              
                      <button id="btnAdd" type="submit" (click)="changerpassword()">
                        <div class="svg-wrapper-1">
                          <div class="svg-wrapper">
              
                            <i class='bx bx-check'></i>
                          </div>
                        </div>
                        <label>Changer Mot de Passe</label>
                      </button>
                  </div> 
                  
                  <div *ngIf="errorMessage" style="color: red;">{{ errorMessage }}</div>
                  <div *ngIf="successMessage" style="color: green;">{{ successMessage }}</div>
                    </div>
                
                  </div>
                </div>

               <div class="block-list  mennu"  id="block-tab-pane">
               <div class="header-friend">
                    <div class="search">
                    <input type="text" placeholder="Chercher Amis">
                     </div>
                    </div>
                  <div class="body-friend" *ngFor="let user of blockedUsers">

                 
              <div class="user-row">
                <div class="user-info">
                  <img [src]= "user.image ? user.image : '/assets/image/user.png'"  alt="user"/>
                  <span class="name">{{user.nom}} {{user.prenom}}</span>
                   <!--span class="email">{{user.email}}</span-->
                </div>
                <i class='bx bx-lock-open-alt' ></i>
                  <button (click)="unblockUser(user.id)" class="action-block">Débloquer</button>
                   </div>
                  </div>

                </div>
            </div>
            
            
      </div>
     
  </div>


<div class="popupBlock" #popupBloque>
  <div class="cardBlock">
    <p>Vous êtes sûr de le bloquer !</p>
    <button  (click)="blockUser()">
      <div class="svg-valider">

        <i class='bx bxs-user-check'></i>
      </div>

      <span >Confirmer</span>
    </button>
  </div>
</div>
<div *ngIf="isOverlayVisible" class="overlay"  (click)="onOverlayClick()"></div>

</body>
</html>

